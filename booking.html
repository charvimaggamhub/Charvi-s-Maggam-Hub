<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Book Now | Charvi's Maggam Hub</title>

<meta name="description" content="Book bridal maggam work and embroidery services at Charvi's Maggam Hub, Jeypore Odisha.">

<link rel="icon" type="image/png" href="favicon.png">
<link rel="stylesheet" href="style.css">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#b76e79">
</head>

<body>

<!-- NAVBAR -->
<header class="navbar">
  <img src="logo.png" class="nav-logo">
  <nav>
    <a href="index.html">Home</a>
    <a href="gallery.html">Gallery</a>
    <a href="contact.html">Contact</a>
    <a href="booking.html" class="active">Book Now</a>
  </nav>
</header>

<!-- BOOKING FORM -->
<section class="booking-wrapper">
  <div class="booking-box">

    <h2>Book Your Design</h2>
    <p class="sub-text">We create elegance with every stitch âœ¨</p>

    <form id="bookingForm" onsubmit="submitBooking(); return false;">

      <div class="input-group">
        <label>Your Name</label>
        <input type="text" id="name" placeholder="Enter your name" required>
      </div>

      <div class="input-group">
        <label>Phone Number</label>
        <input type="tel" id="phone" placeholder="Enter your phone number" required>
      </div>

      <div class="input-group">
        <label>Select Service</label>
        <select id="service" required>
          <option value="">Choose a service</option>
          <option>Bridal Maggam Work</option>
          <option>Designer Blouse Embroidery</option>
          <option>Saree / Dupatta Work</option>
          <option>Kids Wear Embroidery</option>
          <option>Custom Hand Embroidery</option>
        </select>
      </div>

      <button type="submit">âœ¨ Book Now</button>
      <p id="status"></p>

    </form>
  </div>
</section>

<!-- FOOTER -->
<footer>
  Â© 2025 Charvi's Maggam Hub | All Rights Reserved
</footer>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<script>
/* Firebase Config */
const firebaseConfig = {
  apiKey: "AIzaSyCBpSgYDgrzQ-Jq-Y8SfxRbIYiyNeY0F3I",
  authDomain: "charvis-maggam-hub-52cb4.firebaseapp.com",
  projectId: "charvis-maggam-hub-52cb4"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

/* Submit Booking */
function submitBooking(){

  const name = document.getElementById("name").value;
  const phone = document.getElementById("phone").value;
  const service = document.getElementById("service").value;

  if(!name || !phone || !service){
    alert("Please fill all details");
    return;
  }

  /* Generate Booking ID */
  const bookingId = "CMH-" + Date.now();

  /* Save booking in Firestore */
  db.collection("bookings").add({
    bookingId,
    name,
    phone,
    service,
    status: "Pending",
    date: new Date().toLocaleString()
  }).then(()=>{

    /* ================= ADMIN MESSAGE ================= */
    const adminMessage =
`Hello Charvi's Maggam Hub,

ðŸ“¥ New booking received

ðŸ†” Booking ID: ${bookingId}
ðŸ‘¤ Name: ${name}
ðŸ“ž Phone: ${phone}
ðŸ§µ Service: ${service}

Thanks & Regards
Charvi's Maggam Hub`;

    const adminNumber = "916372364419";
    const adminURL =
      `https://wa.me/${adminNumber}?text=${encodeURIComponent(adminMessage)}`;

    /* ================= CUSTOMER MESSAGE ================= */

    let customerMessage = "";

    if(service.toLowerCase().includes("bridal")){
      customerMessage =
`Hello ${name} ðŸ‘‹,

ðŸ’ Thank you for choosing
Charvi's Maggam Hub for your Maggam Work âœ¨

ðŸ†” Booking ID: ${bookingId}
ðŸ§µ Service: ${service}

Our designer will personally contact you
to discuss your bridal requirements.

Thanks & Regards
Charvi's Maggam Hub`;
    } else {
      customerMessage =
`Hello ${name} ðŸ‘‹,

Thank you for booking with
Charvi's Maggam Hub ðŸŒ¸

ðŸ†” Booking ID: ${bookingId}
ðŸ§µ Service: ${service}

Our team will contact you shortly.

Thanks & Regards
Charvi's Maggam Hub`;
    }

    const customerURL =
      `https://wa.me/?text=${encodeURIComponent(customerMessage)}`;

    /* Open WhatsApp */
    window.open(adminURL, "_blank");

    setTimeout(()=>{
      window.open(customerURL, "_blank");
    }, 1200);

    document.getElementById("status").innerText =
      "ðŸŒ¸ Booking submitted! WhatsApp opened for confirmation.";

    document.getElementById("bookingForm").reset();

  }).catch(err=>{
    console.error(err);
    alert("Something went wrong. Please try again.");
  });


  /* Save booking in Firestore */
  db.collection("bookings").add({
    name,
    phone,
    service,
    status: "Pending",
    date: new Date().toLocaleString()
  }).then(()=>{

    /* WhatsApp Message */
    const message =
`Hello Charvi's Maggam Hub,

My booking details:
Name: ${name}
Phone: ${phone}
Service: ${service}

Thanks & Regards
Charvi's Maggam Hub`;

    const whatsappNumber = "6372364419"; // Your WhatsApp number
    const whatsappURL =
      `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;

    window.open(whatsappURL, "_blank");

    document.getElementById("status").innerText =
      "ðŸŒ¸ Booking submitted! WhatsApp opened for confirmation.";

    document.getElementById("bookingForm").reset();
  }).catch(err=>{
    console.error(err);
    alert("Something went wrong. Please try again.");
  });
}
</script>

</body>
</html>
