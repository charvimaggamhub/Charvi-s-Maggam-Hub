<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Manage Users | Charvi's Maggam Hub</title>
<link rel="stylesheet" href="../assets/style.css">
<style>
body { font-family: 'Poppins', sans-serif; background-color: #fff8e1; margin:0; }
.sidebar { width:220px; background:#5c0011; height:100vh; position:fixed; color:#fff; padding-top:30px; }
.sidebar h2 { text-align:center; margin-bottom:30px; color:#d4af37; }
.sidebar a { display:block; padding:15px 20px; color:#fff; text-decoration:none; margin-bottom:5px; transition:0.3s; cursor:pointer; }
.sidebar a:hover, .sidebar a.active { background:#d4af37; color:#5c0011; border-radius:8px; }

.main-content { margin-left:220px; padding:30px; }
.main-content h1 { color:#5c0011; margin-bottom:30px; }

.user-table { width:100%; border-collapse: collapse; margin-bottom:20px; }
.user-table th, .user-table td { border:1px solid #ccc; padding:10px; text-align:left; }
.user-table th { background-color:#5c0011; color:#d4af37; }
.user-table td button { margin-right:5px; padding:5px 10px; border:none; border-radius:5px; cursor:pointer; }
.user-table td .edit-btn { background:#d4af37; color:#5c0011; }
.user-table td .delete-btn { background:#ff4d4d; color:#fff; }

.add-user { margin-top:20px; }
.add-user input { padding:8px; margin-right:10px; border-radius:5px; border:1px solid #ccc; }
.add-user button { padding:8px 15px; border:none; border-radius:5px; background:#d4af37; color:#5c0011; cursor:pointer; }
.add-user button:hover { background:#ffd700; }
</style>
</head>
<body>

<!-- Sidebar -->
<div class="sidebar">
<h2>Admin Panel</h2>
<a href="dashboard.html">Dashboard</a>
<a href="manage-users.html" class="active">Manage Users</a>
<a href="login.html">Logout</a>
</div>

<!-- Main Content -->
<div class="main-content">
<h1>Manage Users</h1>

<table class="user-table" id="user-table">
  <thead>
    <tr>
      <th>#</th>
      <th>Name</th>
      <th>Email</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<div class="add-user">
  <input type="text" id="user-name" placeholder="Name">
  <input type="email" id="user-email" placeholder="Email">
  <button onclick="addUser()">Add User</button>
</div>

<script>
// ===== Users Data =====
let users = JSON.parse(localStorage.getItem('users')) || [];

// ===== Render Users Table =====
function renderUsers() {
  const tbody = document.querySelector('#user-table tbody');
  tbody.innerHTML = '';
  users.forEach((user, index) => {
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${index + 1}</td>
      <td>${user.name}</td>
      <td>${user.email}</td>
      <td>
        <button class="edit-btn" onclick="editUser(${index})">Edit</button>
        <button class="delete-btn" onclick="deleteUser(${index})">Delete</button>
      </td>
    `;
    tbody.appendChild(tr);
  });
}

// ===== Add User =====
function addUser() {
  const name = document.getElementById('user-name').value.trim();
  const email = document.getElementById('user-email').value.trim();
  if(!name || !email){ alert('Please enter both name and email'); return; }
  users.push({ name, email });
  localStorage.setItem('users', JSON.stringify(users));
  document.getElementById('user-name').value = '';
  document.getElementById('user-email').value = '';
  renderUsers();
}

// ===== Edit User =====
function editUser(index) {
  const newName = prompt("Edit name:", users[index].name);
  const newEmail = prompt("Edit email:", users[index].email);
  if(newName && newEmail){
    users[index].name = newName;
    users[index].email = newEmail;
    localStorage.setItem('users', JSON.stringify(users));
    renderUsers();
  }
}

// ===== Delete User =====
function deleteUser(index) {
  if(confirm("Are you sure you want to delete this user?")){
    users.splice(index, 1);
    localStorage.setItem('users', JSON.stringify(users));
    renderUsers();
  }
}

// ===== Initial Render =====
renderUsers();
</script>

</body>
</html>
