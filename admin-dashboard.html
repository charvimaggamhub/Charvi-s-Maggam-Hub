<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Admin Dashboard | Charvi's Maggam Hub</title>
<link rel="icon" type="image/png" href="favicon.png">
<link rel="stylesheet" href="style.css">
<link rel="manifest" href="manifest.json">
</head>

<body>
  <!-- NAVBAR -->
<header class="navbar">
  <img src="logo.png" class="nav-logo">
  <nav>
    </nav>
</header>

<div class="admin-layout">

  <!-- SIDEBAR -->
  <div class="sidebar">
    <h2>Charvi Admin</h2>
    <ul>
      <li onclick="showSection('bookingsSection')">ðŸ“‹ Bookings</li>
      <li onclick="showSection('gallerySection')">ðŸ–¼ Gallery</li>
      <li onclick="adminLogout()">ðŸšª Logout</li>
    </ul>
  </div>

  <!-- MAIN CONTENT -->
  <div class="main-content">

    <!-- HEADER -->
    <div class="top-header">
      <h1>Dashboard</h1>
    </div>


    <!-- BOOKINGS SECTION -->
    <div id="bookingsSection">
      <h3>Bookings</h3>

<table border="1" width="100%" id="bookingTable">
  <thead>
    <tr>
      <th>Date</th>
      <th>Booking ID</th>
      <th>Name</th>
      <th>Phone</th>
      <th>Service</th>
      <th>Message</th>
      <th>Email</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>


<script>

const SCRIPT_URL = "AKfycbzWxBh1-GTwNcFxKs_s-oAP0_vUa-MiCaaisIldGgpRl5-vZJpfcakh2iQj1WYyB2B7Vw";

async function loadBookings() {

  try {

    const response = await fetch(SCRIPT_URL);
    const data = await response.json();

    const tableBody = document.querySelector("#bookingTable tbody");
    tableBody.innerHTML = "";

    data.forEach(booking => {

      const row = `
        <tr>
          <td>${booking.timestamp}</td>
          <td>${booking.bookingId}</td>
          <td>${booking.name}</td>
          <td>${booking.phone}</td>
          <td>${booking.service}</td>
          <td>${booking.message}</td>
          <td>${booking.email}</td>
        </tr>
      `;

      tableBody.innerHTML += row;

    });

  } catch (error) {
    console.error("Error loading bookings:", error);
  }

}

loadBookings();

</script>



    <!-- GALLERY SECTION -->
    <div id="gallerySection" style="display:none;">
      <h3>Upload Gallery Image</h3>

      <div class="upload-box" id="dropArea">
        Drag & Drop Image Here
        <input type="file" id="imageFile" hidden>
      </div>

      <div id="previewContainer"></div>

      <hr>

      <h3>Gallery</h3>
      <div id="adminGallery" class="gallery-grid"></div>
    </div>

  </div>

</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>

<script type="module" src="admin.js"></script>
<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('service-worker.js')
    .then(() => console.log("Service Worker Registered"));
}
</script>

</body>
</html>
